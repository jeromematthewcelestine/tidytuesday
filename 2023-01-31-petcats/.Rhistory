library(tidyverse)
install.packages("tidyverse")
source("~/Documents/02_did.R")
setwd("~/Library/CloudStorage/OneDrive-Personal/Projects/tidytuesday/tidytuesday/2023-01-31-petcats")
library(readr)
library(tidyverse)
library(ggplot2)
library(readr)
source("~/Library/CloudStorage/OneDrive-Personal/Projects/tidytuesday/tidytuesday/2023-01-31-petcats/02_explore.R")
tuesdata <- tidytuesdayR::tt_load('2023-01-31')
library(tidytuesdayR)
install.packages("tidytuesdayR")
tuesdata <- tidytuesdayR::tt_load('2023-01-31')
cats_uk <- tuesdata$cats_uk
cats_uk_reference <- tuesdata$cats_uk_reference
write_csv(cats_uk, "cats_uk.csv")
write_csv(cats_uk_reference, "cats_uk_reference.csv")
cats <- read_csv("cats_uk.csv")
cats
cats
summarize(cats)
summary(cats)
ggplot(cats) + geom_point(aes(x = lng, y = lat))
ggplot(cats) + geom_point(aes(x = location_long, y = location_lat))
ggplot(cats) + geom_point(aes(x = location_lat, y = location_long))
ggplot(cats) + geom_point(aes(x = location_long, y = location_lat))
ggplot(cats) + geom_point(aes(x = location_long, y = location_lat, color = as_factor(tag_id)))
ggplot(cats) + geom_point(aes(x = location_long, y = location_lat, color = as_factor(tag_id)), show.legend = FALSE)
nrow(cats)
ggplot(cats) + geom_point(show.legend = FALSE,
aes(x = location_long,
y = location_lat,
color = as_factor(tag_id),
size = 1))
ggplot(cats) + geom_point(show.legend = FALSE,
aes(x = location_long,
y = location_lat,
color = as_factor(tag_id),
size = 0.1))
ggplot(cats) + geom_point(show.legend = FALSE,
aes(x = location_long,
y = location_lat,
color = as_factor(tag_id),
size = 0.1))
ggplot(cats) + geom_point(show.legend = FALSE,
aes(x = location_long,
y = location_lat,
color = as_factor(tag_id)),
size = 1)
ggplot(cats) + geom_point(show.legend = FALSE,
aes(x = location_long,
y = location_lat,
color = as_factor(tag_id)),
size = 0.5)
ggplot(cats) + geom_point(show.legend = FALSE,
aes(x = location_long,
y = location_lat,
color = as_factor(tag_id)),
size = 0.2)
ggplot(cats) + geom_point(show.legend = FALSE,
aes(x = location_long,
y = location_lat,
color = as_factor(tag_id)),
size = 0.1)
library(maps)
install.packages("maps")
library(maps)
UK <- map_data(map = "world", region = "UK")
+ geom_polygon(data = UK, aes(x = long, y = lat, group = group))
ggplot(cats) + geom_point(show.legend = FALSE,
aes(x = location_long,
y = location_lat,
color = as_factor(tag_id)),
size = 0.1) +
geom_polygon(data = UK, aes(x = long, y = lat, group = group))
ggplot(cats) + geom_point(show.legend = FALSE,
aes(x = location_long,
y = location_lat,
color = as_factor(tag_id)),
size = 0.1) +
geom_path(data = UK, aes(x = long, y = lat, group = group))
UK <- map_data(map = "UK", region = "Cornwall")
ggplot(cats) + geom_point(show.legend = FALSE,
aes(x = location_long,
y = location_lat,
color = as_factor(tag_id)),
size = 0.1) +
geom_path(data = UK, aes(x = long, y = lat, group = group))
UK <- map_data(map = "UK", region = "Cornwall")
#
cats %>% group_by(tag_id) %>% summarize(count = n())
amber <- cats %>% filter(tag_id == "Amber-Tag")
ggplot(amber) + geom_point(aes(x = location_long, y = location_lat))
head(cats)
glimpse(cats)
ggplot(amber) + geom_point(aes(x = location_long, y = location_lat, color = timestamp))
ggplot(amber) + geom_point(aes(x = location_long, y = location_lat, color = timestamp), size = 1)
ggplot(amber) + geom_point(aes(x = location_long, y = location_lat, color = timestamp), size = 0.2)
ggplot(amber %>% ftiler(location_long > -4.65)) + geom_point(aes(x = location_long, y = location_lat, color = timestamp), size = 0.2)
ggplot(amber %>% filter(location_long > -4.65)) + geom_point(aes(x = location_long, y = location_lat, color = timestamp), size = 0.2)
ggplot(amber %>% filter(location_long > -4.65)) +
geom_point(aes(x = location_long, y = location_lat, color = timestamp), size = 0.5)
ggplot(amber %>% filter(location_long > -4.65)) +
geom_point(aes(x = location_long, y = location_lat, color = timestamp), size = 0.5) +
scale_color_brewer()
ggplot(amber %>% filter(location_long > -4.65)) +
geom_point(aes(x = location_long, y = location_lat, color = timestamp), size = 0.5) +
glimpse(cats)
ggplot(amber %>% filter(location_long > -4.65)) +
geom_point(aes(x = location_long, y = location_lat, color = timestamp), size = 0.5)
ggplot(amber %>% filter(location_long > -4.65)) +
geom_point(aes(x = location_long, y = location_lat, color = timestamp), size = 1.0)
ggplot(amber %>% filter(location_long > -4.65)) +
geom_point(aes(x = location_long, y = location_lat, color = timestamp), size = 2.0)
ggplot(amber %>% filter(location_long > -4.65)) +
geom_point(aes(x = location_long, y = location_lat, color = timestamp), size = 3.0)
library(sf)
install.packages("sf")
lnstr_sfg1 <- st_linestring(matrix(runif(6), ncol = 2))
library(sf)
lnstr_sfg1 <- st_linestring(matrix(runif(6), ncol = 2))
lnstr_sfg2 <- st_linestring(matrix(runif(6), ncol = 2))
class(lnstr_sfg1)
(lnstr_sfc <- st_sfc(lnstr_sfg1, lnstr_sfg2))
dfr <- data.frame(id = c("hwy1", "hwy2"), cars_per_hour = c(78, 22))
(st_sf(dfr, lnstr_sfc))
(sf1 <- st_sf(dfr, lnstr_sfc))
sf1
sf1$lnstr_sfc
sf1$id
sf1$cars_per_hour
setwd("~/Library/CloudStorage/OneDrive-Personal/Projects/R/r-spatial")
df <- read_csv("R-spatial-data/philly_homicides.csv")
str(df)
ph_sf <- st_as_sf(df, coords = c("POINT_X", "POINT_Y"))
str(ph_sf)
st_crs(ph_sf)
st_crs(ph_sf) <- 4326
st_crs(ph_sf)
st_write(ph_sf, "PhiladelphiaHomicides", driver = "ESRI Shapefile")
philly_sf <- st_read("PhiladelphiaHomicides")
philly_sf
st_crs(philly_sf)
plot(philly_sf)
plot(philly_sf)
pop_sf <- st_read("R-spatial-data/Philly/")
plot(pop_sf)
ph_edu <- read_csv("R-spatial-data/PhillyEducation.csv")
names(ph_edu)
names(ph_edu)
names(ph_sf)
names(pop_sf)
joined <- ph_sf %>% left_join(pop_sf, by = c("GEOID10" = "GEOID"))
?merge
merged <- merge(pop_sf, ph_edu)
merged
merged <- merge(pop_sf, ph_edu, by.x = "GEOID10", by.y = "GEOID")
merged
names(merged)
pop_sf
ph_ctr_sfc <- st_sfc(st_point(c(1750160, 467499.9)), crs = 102003)
??crs
library(proj4)
install.packages("proj4")
library(proj4)
ph_ctr_sfc <- st_sfc(st_point(c(1750160, 467499.9)), crs = 102003)
ph_ctr_sfc <- st_sfc(st_point(c(1750160, 467499.9)), crs = "102003")
ph_ctr_sfc
?st_sfc
ph_ctr_sfc <- st_sfc(st_point(c(1750160, 467499.9)), crs = 102003)
library(gdal)
install.packages("proj4string")
?st_sfc
ph_ctr_sfc <- st_sfc(st_point(c(1750160, 467499.9)), crs = 4326)
ph_ctr_sfc <- st_sfc(st_point(c(1750160, 467499.9)), crs = 102003)
ph_ctr_sfc <- st_sfc(st_point(c(1750160, 467499.9)), crs = 4326)
ph_buf_sf <- st_buffer(ph_ctr_sfc, 2000)
ph_buf_intersects <- st_intersects(ph_buf_sf, ph_sf)
??crs
ph_buf_intersects
st_crs(ph_pop)
st_crs(ph_sf)
philly_sf <- st_read("R-spatial-data/Philly/")
st_crs(philly_sf)
library(sf)
philly_sf <- st_read("R-spatial-data/Philly/")
names(philly_sf)
ph_edu <- read.csv("R-spatial-data/PhillyEducation.csv")
philly_sf_merged <- merge(philly_sf, ph_edu, by.x = "GEOID10", by.y = "GEOID")
philly_sf_merged
names(philly_sf_merged)
philly_ctr_sfc <- st_sfc(st_point(c(1750160, 467499.9)), crs = 102003)
st_crs(philly_sf) <- 102003
philly_ctr_sfc <- st_sfc(st_point(c(1750160, 467499.9)), crs = "ESRI:102003")
st_crs(philly_sf)
philly_ctr_sfc <- st_sfc(st_point(c(1750160, 467499.9)), crs = "EPSG:102003")
philly_ctr_sfc <- st_sfc(st_point(c(1750160, 467499.9)), crs = "EPSG:102003")
philly_ctr_sfc <- st_sfc(st_point(c(1750160, 467499.9)), crs = "ESRI:102003")
philly_ctr_sfc
philly_buf_sf <- st_buffer(philly_ctr_sfc, 2000)
philly_buf_intersects <- st_intersects(philly_buf_sf, philly_sf)
st_crs(philly_sf)
st_crs(philly_sf) <- "ESRI:102003"
st_crs(philly_sf)
philly_buf_intersects <- st_intersects(philly_buf_sf, philly_sf)
class(philly_buf_intersects)
philly_buf_intersects[[1]]
philly_sf[philly_buf_intersects[[1]],]
philly_sel_sf <- philly_sf[philly_buf_intersects[[1]],]
plot(st_geometry(philly_sf), border = "#aaaaaa", main = "Census tracts that fall within 2km of city center")
plot(st_geometry(philly_sel_sf), add = T, col = "red")
plot(st_geometry(philly_buf_sf), add = T, lwd = 2)
philly_homicides_sf <- st_read("R-spatial-data/PhillyHomicides/")
st_crs(philly_homicides_sf)
st_crs(philly_sf)
philly_homicides_sf_aea <- st_transform(philly_homicides_sf, st_crs(philly_sf))
range(st_coordinates(philly_homicides_sf))
range(st_coordinates(philly_homicides_sf_aea))
st_write(philly_homicides_sf_aea, "R-spatial-data/PhillyHomicides_aea", driver = "ESRI Shapefile")
philly_crimes_sf <- st_read("R-spatial-data/PhillyCrimerate/", quiet = TRUE)
plot(philly_crimes_sf)
plot(philly_crimes_sf)
plot(philly_crimes_sf$homic_rate)
plot(philly_crimes_sf["homic_rate"])
ggplot(philly_crimes_sf) + geom_sf(aes(fill = homic_rate))
ggplot(philly_crimes_sf) + geom_sf(aes(fill = as_factor(homic_rate)))
ggplot(philly_crimes_sf) + geom_sf(aes(fill = as_factor(homic_rate)), show.legend = FALSE)
philly_crimes_sf
library(ggmap)
install.packages("ggmap")
library(ggmap)
?ggmap
ph_basemap <- get_map(location = c(lon = -75.16522, lat = 39.95258),
zoom = 11,
maptype = "terrain-background",
source = "stamen")
install.packages("basemaps")
library(basemaps)
data(ext)
get_maptypes()
set_defaults(map_service = "osm", map_type = "topographic")
basemap_magick(ext)
basemap_magick(ext)
ext
basemap_plot(ext)
basemap_raster(ext)
basemap_magick(ext, map_service = "osm", map_type = "streets")
basemap_magick(ext, map_service = "osm", map_type = "streets")
basemap_magick(ext, map_service = "mapbox", map_type = "satellite")
?basemap_magick
basemap_magick(ext, map_service = "mapbox", map_type = "satellite", map_token = "pk.eyJ1IjoiamVyb21ldyIsImEiOiJjbGRzN253cHAxY2JmM29wNjcxZnN2M205In0.RGWhdU4lE5JS6xfO-hH-BA")
basemap_magick(ext,
map_service = "mapbox",
map_type = "topographic",
map_token = "pk.eyJ1IjoiamVyb21ldyIsImEiOiJjbGRzN253cHAxY2JmM29wNjcxZnN2M205In0.RGWhdU4lE5JS6xfO-hH-BA")
ggplot(amber %>% filter(location_long > -4.65)) +
geom_point(aes(x = location_long, y = location_lat, color = timestamp), size = 3.0)
library(tidyverse)
library(ggplot2)
library(readr)
library(maps)
cats <- read_csv("cats_uk.csv")
setwd("~/Library/CloudStorage/OneDrive-Personal/Projects/tidytuesday/tidytuesday/2023-01-31-petcats")
cats <- read_csv("cats_uk.csv")
cats
summary(cats)
# mapping
UK <- map_data(map = "UK", region = "Cornwall")
ggplot(cats) + geom_point(show.legend = FALSE,
aes(x = location_long,
y = location_lat,
color = as_factor(tag_id)),
size = 0.1) +
geom_path(data = UK, aes(x = long, y = lat, group = group))
# mapping
UK <- map_data(map = "UK", region = "Cornwall")
?map_data
# mapping
UK <- map_data(map = "world", region = "UK")
ggplot(cats) + geom_point(show.legend = FALSE,
aes(x = location_long,
y = location_lat,
color = as_factor(tag_id)),
size = 0.1) +
geom_path(data = UK, aes(x = long, y = lat, group = group))
??maps
install.packages("rgdal")
??maps
??maps
install.packages("mapproj")
?map_data
ggplot(cats) + geom_point(show.legend = FALSE,
aes(x = location_long,
y = location_lat,
color = as_factor(tag_id)),
size = 0.1) +
geom_path(data = UK %>% filter(long<-3), aes(x = long, y = lat, group = group))
ggplot(cats) + geom_point(show.legend = FALSE,
aes(x = location_long,
y = location_lat,
color = as_factor(tag_id)),
size = 0.1) +
geom_path(data = UK %>% filter(long< -3), aes(x = long, y = lat, group = group))
ggplot(cats) + geom_point(show.legend = FALSE,
aes(x = location_long,
y = location_lat,
color = as_factor(tag_id)),
size = 0.1) +
geom_curve(data = UK %>% filter(long< -3), aes(x = long, y = lat, group = group))
ggplot(cats) + geom_point(show.legend = FALSE,
aes(x = location_long,
y = location_lat,
color = as_factor(tag_id)),
size = 0.1) +
geom_path(data = UK %>% filter(long< -3), aes(x = long, y = lat, group = group))
ggplot(cats) + geom_point(show.legend = FALSE,
aes(x = location_long,
y = location_lat,
color = as_factor(tag_id)),
size = 0.1) +
geom_path(data = UK %>% filter(long< -3, lat < 51), aes(x = long, y = lat, group = group))
?basemap
data(ext)
basemap_ggplot(ext)
basemap_ggplot(ext,
map_service = "mapbox",
map_type = "satellite",
map_token = "pk.eyJ1IjoiamVyb21ldyIsImEiOiJjbGRzN253cHAxY2JmM29wNjcxZnN2M205In0.RGWhdU4lE5JS6xfO-hH-BA")
basemap_plot(ext,
map_service = "mapbox",
map_type = "satellite",
map_token = "pk.eyJ1IjoiamVyb21ldyIsImEiOiJjbGRzN253cHAxY2JmM29wNjcxZnN2M205In0.RGWhdU4lE5JS6xfO-hH-BA")
?basemap_plot
basemap_plot(ext,
map_service = "mapbox",
map_type = "streets",
map_token = "pk.eyJ1IjoiamVyb21ldyIsImEiOiJjbGRzN253cHAxY2JmM29wNjcxZnN2M205In0.RGWhdU4lE5JS6xfO-hH-BA")
basemap_plot(ext,
map_service = "esri",
map_type = "world_street_map",
map_token = "pk.eyJ1IjoiamVyb21ldyIsImEiOiJjbGRzN253cHAxY2JmM29wNjcxZnN2M205In0.RGWhdU4lE5JS6xfO-hH-BA")
basemap_ggplot(ext,
map_service = "esri",
map_type = "world_street_map",
map_token = "pk.eyJ1IjoiamVyb21ldyIsImEiOiJjbGRzN253cHAxY2JmM29wNjcxZnN2M205In0.RGWhdU4lE5JS6xfO-hH-BA")
basemap_gglayer(ext,
map_service = "esri",
map_type = "world_street_map",
map_token = "pk.eyJ1IjoiamVyb21ldyIsImEiOiJjbGRzN253cHAxY2JmM29wNjcxZnN2M205In0.RGWhdU4lE5JS6xfO-hH-BA")
basemap_raster(ext,
map_service = "esri",
map_type = "world_street_map",
map_token = "pk.eyJ1IjoiamVyb21ldyIsImEiOiJjbGRzN253cHAxY2JmM29wNjcxZnN2M205In0.RGWhdU4lE5JS6xfO-hH-BA")
?draw_ext
ext1 <- draw_ext()
ext
?st_polygon
temp_mat <- as.matrix(c(0, 1, 1, 0), nrow = 2)
temp_mat
temp_mat <- as.matrix(c(0, 1, 1, 0), row = 2)
temp_mat
temp_mat <- as.matrix(c(0, 1, 1, 0), rows = 2)
temp_mat
?as.matrix
temp_mat <- matrix(c(0, 1, 1, 0), nrow = 2)
temp_mat
poly1 <- st_polygon(x = list(temp_mat))
temp_mat <- matrix(c(0, 1, 1, 0, 0, 1), nrow = 3)
temp_mat
temp_mat <- matrix(c(0, 1, 0, 1, 0, 1), nrow = 3)
temp_mat
poly1 <- st_polygon(x = list(temp_mat))
poly1
?st_polygon
poly1 <- st_polygon(x = list(temp_mat), dim = "XY")
matrix(c(0,0,10,0,10,10,0,10,0,0),ncol=2, byrow=TRUE)
temp_mat <- matrix(c(0,0,10,0,10,10,0,10,0,0),ncol=2, byrow=TRUE)
poly1 <- st_polygon(x = list(temp_mat), dim = "XY")
poly1
class(poly1)
poly_sfc <- st_sfc(poly1)
?draw_ext
class(ext)
ext
poly_sfc <- st_sf(poly1)
poly_sfc <- st_sf(st_sfc(poly1))
poly_sf <- st_sf(st_sfc(poly1))
poly_sf
poly_sf
basemap_raster(poly_sf,
map_service = "esri",
map_type = "world_street_map",
map_token = "pk.eyJ1IjoiamVyb21ldyIsImEiOiJjbGRzN253cHAxY2JmM29wNjcxZnN2M205In0.RGWhdU4lE5JS6xfO-hH-BA")
st_crs(poly1) <- "ESRI:4326"
class(poly_sf)
st_crs(poly_sf) <- "ESRI:4326"
st_crs(poly_sf) <- "EPSG:4326"
basemap_raster(poly_sf,
map_service = "esri",
map_type = "world_street_map",
map_token = "pk.eyJ1IjoiamVyb21ldyIsImEiOiJjbGRzN253cHAxY2JmM29wNjcxZnN2M205In0.RGWhdU4lE5JS6xfO-hH-BA")
basemap_plot(poly_sf,
map_service = "esri",
map_type = "world_street_map",
map_token = "pk.eyJ1IjoiamVyb21ldyIsImEiOiJjbGRzN253cHAxY2JmM29wNjcxZnN2M205In0.RGWhdU4lE5JS6xfO-hH-BA")
